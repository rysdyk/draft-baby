function startDraft(){var e=document.getElementById("draft-settings"),t=parseInt(teams.value),n=parseInt(draftPos.value);fadeOut(e),setPicks(t,n),computerPicks(players)}function setPicks(e,t){for(var n=t;n<=players.length;n+=2*e)picks.push(n);for(var a=2*e-t+1;a<=players.length;a+=2*e)picks.push(a)}function computerPicks(){if(picks.includes(count))userDraft();else{var e=players.shift();draftSelected(e),increaseCount(),run=setTimeout(function(){computerPicks()},750)}}function increaseCount(){count++,document.getElementById("pick-number").innerHTML=count}function userDraft(){clearTimeout(run),document.getElementById("draft-progress").classList.add("eligible"),tbody[0].classList.add("active");var e=document.querySelector("tbody.active").childNodes;e.forEach(function(e){e.addEventListener("click",function(){if(tbody[0].classList.contains("active")){tbody[0].classList.remove("active"),document.getElementById("draft-progress").classList.remove("eligible");for(var e=0;e<players.length;e++)if(players[e].name==this.childNodes[0].innerHTML){var t=players[e];players.splice(e,1),draftSelected(t),increaseCount();var n=document.getElementById("team"),a=document.createElement("li");n.appendChild(document.createTextNode(t.position+" "+t.name+" "+t.bye)),n.appendChild(a),setTimeout(function(){computerPicks()},750);break}}})})}function draftSelected(e){fullDraftedList.push(e);var t=document.querySelector("tbody").childNodes;t.forEach(function(t){var n=t.childNodes[0].innerText;e.name==n&&fadeOut(t)});var n=document.getElementById("drafted"),a=document.createElement("li");a.appendChild(document.createTextNode(count+". "+e.name)),n.prepend(a)}function fadeOut(e){e.classList.add("fadeOut"),setTimeout(function(){e.classList.add("hidden")},500)}var request=new XMLHttpRequest;request.open("GET","../lib/ffc_2017_6_23.json",!1),request.send(null);var players=JSON.parse(request.responseText),table=document.getElementById("draftable-player-list"),tbody=table.getElementsByTagName("tbody"),teams=document.getElementById("teams"),draftPos=document.getElementById("draftPos");players.forEach(function(e){var t=document.createElement("tr");tbody[0].appendChild(t);for(var n in e)if("name"==n||"position"==n||"team"==n||"bye"==n){var a=document.createElement("td");a.appendChild(document.createTextNode(e[n])),t.appendChild(a)}}),players.forEach(function(e,t){var n,a,r=players.indexOf(e);t<25?(n=1.2*r+4,a=.7*r-4):t>=25&&t<51?(n=1.1*r,a=.8*r):t>=51&&t<100?(n=1.05*r,a=.9*r):(n=1.05*r,a=.9*r),a<0&&(a=0),sorted_pos=Math.random()*(n-a)+a,players[t].sorted_pos=sorted_pos}),players.sort(function(e,t){return e.sorted_pos-t.sorted_pos}),teams.addEventListener("change",function(){var e=parseInt(teams.value);draftPos.innerHTML="";for(var t=1;t<=e;t++){var n=document.createElement("option");n.text=t,n.value=t,draftPos.add(n)}});var count=1,run,picks=[],teams,draftPos,fullDraftedList=[];